# Advent5 - Part2
# Day 5: Sunny with a Chance of Asteroids
intcode = [3,225,1,225,6,6,1100,1,238,225,104,0,1002,43,69,224,101,-483,224,224,4,224,1002,223,8,223,1001,224,5,224,1,224,223,223,1101,67,60,225,1102,5,59,225,1101,7,16,225,1102,49,72,225,101,93,39,224,101,-98,224,224,4,224,102,8,223,223,1001,224,6,224,1,224,223,223,1102,35,82,225,2,166,36,224,101,-4260,224,224,4,224,102,8,223,223,101,5,224,224,1,223,224,223,102,66,48,224,1001,224,-4752,224,4,224,102,8,223,223,1001,224,2,224,1,223,224,223,1001,73,20,224,1001,224,-55,224,4,224,102,8,223,223,101,7,224,224,1,223,224,223,1102,18,41,224,1001,224,-738,224,4,224,102,8,223,223,101,6,224,224,1,224,223,223,1101,68,71,225,1102,5,66,225,1101,27,5,225,1101,54,63,224,1001,224,-117,224,4,224,102,8,223,223,1001,224,2,224,1,223,224,223,1,170,174,224,101,-71,224,224,4,224,1002,223,8,223,1001,224,4,224,1,223,224,223,4,223,99,0,0,0,677,0,0,0,0,0,0,0,0,0,0,0,1105,0,99999,1105,227,247,1105,1,99999,1005,227,99999,1005,0,256,1105,1,99999,1106,227,99999,1106,0,265,1105,1,99999,1006,0,99999,1006,227,274,1105,1,99999,1105,1,280,1105,1,99999,1,225,225,225,1101,294,0,0,105,1,0,1105,1,99999,1106,0,300,1105,1,99999,1,225,225,225,1101,314,0,0,106,0,0,1105,1,99999,1007,226,226,224,1002,223,2,223,1006,224,329,1001,223,1,223,1007,226,677,224,102,2,223,223,1006,224,344,1001,223,1,223,108,677,677,224,102,2,223,223,1005,224,359,1001,223,1,223,1007,677,677,224,1002,223,2,223,1006,224,374,101,1,223,223,8,677,226,224,1002,223,2,223,1006,224,389,101,1,223,223,7,226,226,224,1002,223,2,223,1005,224,404,101,1,223,223,7,677,226,224,102,2,223,223,1005,224,419,1001,223,1,223,8,226,677,224,1002,223,2,223,1005,224,434,101,1,223,223,1008,226,677,224,102,2,223,223,1006,224,449,1001,223,1,223,7,226,677,224,1002,223,2,223,1006,224,464,1001,223,1,223,108,677,226,224,102,2,223,223,1005,224,479,101,1,223,223,108,226,226,224,1002,223,2,223,1006,224,494,101,1,223,223,8,226,226,224,1002,223,2,223,1005,224,509,1001,223,1,223,1107,677,226,224,102,2,223,223,1005,224,524,1001,223,1,223,1107,226,226,224,102,2,223,223,1005,224,539,1001,223,1,223,1108,677,677,224,1002,223,2,223,1006,224,554,101,1,223,223,107,226,677,224,102,2,223,223,1005,224,569,1001,223,1,223,1108,226,677,224,1002,223,2,223,1005,224,584,1001,223,1,223,1107,226,677,224,1002,223,2,223,1005,224,599,1001,223,1,223,1008,226,226,224,1002,223,2,223,1005,224,614,101,1,223,223,107,226,226,224,102,2,223,223,1006,224,629,1001,223,1,223,1008,677,677,224,1002,223,2,223,1006,224,644,101,1,223,223,107,677,677,224,1002,223,2,223,1005,224,659,101,1,223,223,1108,677,226,224,1002,223,2,223,1006,224,674,1001,223,1,223,4,223,99,226]
system_id = 5
address = 0
memory = system_id
oppcode = intcode[address]
oppcode_str = str(oppcode).zfill(5)
A = oppcode_str[0]
B = oppcode_str[1]
C = oppcode_str[2]
DE = oppcode_str[3:]
while DE != "99":
    #print("Instructie",oppcode_str)
    if DE == "01" or DE == "02" or DE == "05" or DE == "06" or DE == "07" or DE == "08":
        param1 = intcode[address+1]
        param2 = intcode[address+2]
        param3 = intcode[address+3]
        # Parameters that an instruction writes to will never be in immediate mode
        # if A == "0":
        #    param3 = intcode[param3]
        if B == "0":
            param2 = intcode[param2]
        if C == "0":
            param1 = intcode[param1]
        #print("param1",param1)
        #print("param2",param2)
        #print("param3",param3)
        if DE == "01":
            intcode[param3]=param1+param2
            address = address + 4
        if DE == "02":
            intcode[param3]=param1*param2
            address = address + 4
        if DE == "05":
            if param1 != 0:
                address = param2
            else:
                address = address + 3
        if DE == "06":
            if param1 == 0:
                address = param2
            else:
                address = address + 3
        if DE == "07":
            if param1 < param2:
                intcode[param3]=1
            else:
                intcode[param3]=0
            address = address + 4
        if DE == "08":
            if param1 == param2:
                intcode[param3]=1
            else:
                intcode[param3]=0
            address = address + 4
    elif DE == "03" or DE == "04":
        param1 = intcode[address+1]
        if DE == "03":
            intcode[param1] = memory
        else:
            memory = intcode[param1]
        address = address + 2
    elif DE == "99":
        break
    else:
        print("Error DE:",DE)
        break
    oppcode = intcode[address]
    oppcode_str = str(oppcode).zfill(5)
    A = oppcode_str[0]
    B = oppcode_str[1]
    C = oppcode_str[2]
    DE = oppcode_str[3:]
    #print(intcode)
solution = memory
print (solution)